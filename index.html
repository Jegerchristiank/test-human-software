<!DOCTYPE html>
<html lang="da">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Human Biologi Studio</title>
    <link rel="icon" href="Logo.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&family=Sora:wght@500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="ambient ambient-one"></div>
    <div class="ambient ambient-two"></div>
    <div class="ambient ambient-three"></div>
    <div class="noise-layer"></div>
    <div class="theme-switch" role="group" aria-label="Tema">
      <span class="theme-label">Lys</span>
      <label class="theme-toggle">
        <input type="checkbox" id="theme-toggle" aria-label="Skift til mørk tilstand" />
      </label>
      <span class="theme-label">Mørk</span>
    </div>

    <div class="app">
      <section id="loading-screen" class="screen active">
        <div class="loading-shell">
          <div class="loading-orbit" role="status" aria-live="polite" aria-label="Indlæser">
            <img class="loading-logo" src="Logo.png" alt="Human Biologi Studio logo" />
          </div>
          <div class="loading-text" id="loading-status">Indlæser …</div>
          <div class="loading-detail" id="loading-detail">Gør klar til din session</div>
          <div
            class="loading-progress"
            id="loading-progress"
            role="progressbar"
            aria-label="Indlæsning"
            aria-valuemin="0"
            aria-valuemax="100"
            aria-valuenow="0"
          >
            <div class="loading-progress-track">
              <div class="loading-progress-fill" id="loading-progress-fill"></div>
            </div>
            <div class="loading-progress-value" id="loading-progress-value">0%</div>
          </div>
          <div class="loading-actions hidden" id="loading-actions">
            <button id="loading-home-btn" class="btn ghost small" type="button">Til forsiden</button>
            <button id="loading-retry-btn" class="btn secondary small" type="button">Prøv igen</button>
          </div>
        </div>
      </section>
      <section id="auth-screen" class="screen hidden">
        <div class="landing-shell auth-shell">
          <header class="sales-hero">
            <div class="sales-copy reveal" style="--delay: 0s">
              <div class="brand-block">
                <div class="brand-mark">
                  <img class="brand-logo" src="Logo.png" alt="Human Biologi Studio logo" />
                </div>
                <div>
                  <div class="brand-subtitle">Sundhed &amp; Informatik</div>
                  <div class="hero-eyebrow">Eksamensro, bygget til fokus</div>
                  <h1>Human Biologi Studio</h1>
                  <p>
                    Byg en runde på få sekunder, træn MCQ og kortsvar i samme flow, og følg dit niveau uden støj.
                  </p>
                </div>
              </div>
              <div class="sales-cta">
                <a class="btn primary" href="#auth-start">Start gratis</a>
                <button id="auth-demo-btn" class="btn ghost" type="button">Se demo</button>
              </div>
              <div class="auth-note" id="auth-note">
                Demo gemmer kun lokalt og giver ikke adgang til abonnement.
              </div>
              <div class="sales-price">
                <div class="price-pill">Pro 179 kr/md</div>
                <div class="price-note">Gratis plan med egen nøgle</div>
              </div>
              <div class="trust-row">
                <span>MCQ + kortsvar</span>
                <span>7-trinsscore</span>
                <span>AI-hjælp på Pro</span>
              </div>
            </div>
            <div class="sales-visual reveal" style="--delay: 0.05s">
              <div class="device-stack" aria-hidden="true">
                <div class="device-card primary">
                  <div class="device-top">
                    <span class="device-title">Runde · 24 spørgsmål</span>
                    <span class="device-badge">Pro</span>
                  </div>
                  <div class="device-metric">
                    <div class="device-label">Score nu</div>
                    <div class="device-value">78%</div>
                    <div class="device-sub">Mål: 12</div>
                  </div>
                  <div class="device-row">
                    <span class="device-pill">MCQ</span>
                    <span class="device-pill">Kortsvar</span>
                    <span class="device-pill">Oplæsning</span>
                  </div>
                  <div class="device-progress">
                    <span>Tempo 1:12</span>
                    <div class="device-bar"><span></span></div>
                  </div>
                </div>
                <div class="device-card secondary">
                  <div class="device-top">
                    <span class="device-title">Facit og hints</span>
                    <span class="device-dot"></span>
                  </div>
                  <div class="device-line"></div>
                  <div class="device-line short"></div>
                  <div class="device-line"></div>
                  <div class="device-line short"></div>
                </div>
                <div class="device-card tertiary">
                  <div class="device-top">
                    <span class="device-title">Historik</span>
                  </div>
                  <div class="device-chart">
                    <span></span><span></span><span></span><span></span>
                  </div>
                  <div class="device-foot">Streak: 3 runder</div>
                </div>
              </div>
            </div>
          </header>

          <section class="sales-section reveal" style="--delay: 0.1s">
            <div class="section-header">
              <h2>Et komplet studieflow, samlet ét sted</h2>
              <p>Byg runden, svar, få feedback og følg dit niveau uden at hoppe mellem værktøjer.</p>
            </div>
            <div class="feature-grid">
              <div class="feature-card">
                <span class="feature-dot"></span>
                <h3>MCQ + kortsvar i samme runde</h3>
                <p>Træn begge opgavetyper sammen, så flowet matcher eksamen.</p>
              </div>
              <div class="feature-card">
                <span class="feature-dot"></span>
                <h3>7-trinsscore og klare mål</h3>
                <p>Se hvor tæt du er på 12, og hvad der løfter din score.</p>
              </div>
              <div class="feature-card">
                <span class="feature-dot"></span>
                <h3>AI-hjælp når du ønsker det</h3>
                <p>Auto-bedømmelse, hints og figurbeskrivelser samlet ét sted.</p>
              </div>
              <div class="feature-card">
                <span class="feature-dot"></span>
                <h3>Tempo, oplæsning og fokus</h3>
                <p>Styr tempoet, få oplæsning og fjern alt der forstyrrer.</p>
              </div>
              <div class="feature-card">
                <span class="feature-dot"></span>
                <h3>Uendelig træning</h3>
                <p>Fortsæt med nye spørgsmål og afslut når du selv vælger.</p>
              </div>
              <div class="feature-card">
                <span class="feature-dot"></span>
                <h3>Historik på tværs af runder</h3>
                <p>Gem progression, bedste score og seneste fejl lokalt.</p>
              </div>
            </div>
          </section>

          <section class="sales-section demo-section reveal" id="demo-section" style="--delay: 0.12s">
            <div class="section-header">
              <h2>Prøv flowet på 6 spørgsmål</h2>
              <p>5 multiple choice og 1 kortsvar, genereret til dig. Ét forsøg pr. dag.</p>
            </div>
            <div class="demo-grid">
              <div class="demo-copy">
                <div class="demo-pill">Prøvespil</div>
                <h3>Se hvordan runden føles</h3>
                <p>Få et realistisk indtryk af tempo, feedback og scoring — helt uden login.</p>
                <div class="demo-meta">
                  <span>6 spørgsmål</span>
                  <span>4-5 min</span>
                  <span>Én gang pr. dag</span>
                </div>
                <div class="demo-status" id="demo-status">Klar til at starte.</div>
              </div>
              <div class="panel demo-card" id="demo-card">
                <div class="demo-card-header">
                  <div>
                    <div class="demo-card-label">Prøvespil</div>
                    <div class="demo-card-title" id="demo-card-title">Generér dagens mini-runde</div>
                  </div>
                  <div class="demo-card-meta">
                    <span class="demo-progress" id="demo-progress">0/6</span>
                    <span class="demo-score" id="demo-score">0/6</span>
                  </div>
                </div>
                <div class="demo-body">
                  <div class="demo-loading hidden" id="demo-loading" aria-live="polite">
                    <div class="demo-loading-spinner" aria-hidden="true"></div>
                    <div class="demo-loading-text">Genererer dagens prøvespil …</div>
                  </div>
                  <div class="demo-empty" id="demo-empty">
                    <p>Du får 5 MCQ og 1 kortsvar med det samme.</p>
                    <button id="demo-start-btn" class="btn primary" type="button">Start prøvespil</button>
                    <div class="demo-limit" id="demo-limit">Én gang pr. dag</div>
                  </div>
                  <div class="demo-question hidden" id="demo-question">
                    <div class="demo-question-meta">
                      <span class="demo-chip" id="demo-question-type">MCQ</span>
                      <span class="demo-step" id="demo-step">Spørgsmål 1/6</span>
                    </div>
                    <div class="demo-question-text" id="demo-question-text">—</div>
                    <div class="demo-options" id="demo-options"></div>
                    <div class="demo-short hidden" id="demo-short">
                      <label for="demo-short-input">Dit kortsvar</label>
                      <textarea
                        id="demo-short-input"
                        rows="3"
                        placeholder="Skriv 1-2 sætninger"
                      ></textarea>
                      <button id="demo-short-check" class="btn secondary small" type="button">
                        Tjek kortsvar
                      </button>
                      <div class="demo-short-guidance" id="demo-short-guidance">
                        Fokusér på de vigtigste begreber.
                      </div>
                    </div>
                    <div class="demo-feedback" id="demo-feedback"></div>
                    <div class="demo-controls">
                      <button id="demo-next-btn" class="btn primary" type="button" disabled>Næste</button>
                      <button id="demo-exit-btn" class="btn ghost small" type="button">Luk</button>
                    </div>
                  </div>
                  <div class="demo-result hidden" id="demo-result">
                    <div class="demo-result-score" id="demo-result-score">Score 0/6</div>
                    <p class="demo-result-copy">Du har gennemført prøvespillet.</p>
                    <div class="demo-result-actions">
                      <a class="btn primary" href="#auth-start">Få fuld adgang</a>
                      <button id="demo-close-btn" class="btn ghost small" type="button">Luk</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <section class="sales-section pricing-section reveal" style="--delay: 0.15s">
            <div class="section-header">
              <h2>Vælg din adgang</h2>
              <p>Start gratis med egen nøgle eller vælg Pro med alt inkluderet.</p>
            </div>
            <div class="pricing-grid">
              <div class="pricing-card">
                <div class="pricing-title">Gratis</div>
                <div class="pricing-price">0 kr</div>
                <ul>
                  <li>MCQ + kortsvar i samme runde</li>
                  <li>Manuel vurdering og facit</li>
                  <li>Historik gemt lokalt</li>
                </ul>
                <div class="pricing-note">Brug din egen nøgle for AI-hjælp.</div>
              </div>
              <div class="pricing-card highlight">
                <div class="pricing-title">Pro</div>
                <div class="pricing-price">179 kr/md</div>
                <ul>
                  <li>AI-hints og auto-bedømmelse</li>
                  <li>Oplæsning og figurbeskrivelser</li>
                  <li>Prioritering af svage områder</li>
                </ul>
                <div class="pricing-note">Skift eller opsig når som helst.</div>
              </div>
            </div>
          </section>

          <section class="panel auth-panel reveal" id="auth-start" style="--delay: 0.2s">
            <div class="panel-header">
              <h2>Log ind eller opret konto</h2>
              <p>Brug email og adgangskode — eller få et login-link sendt.</p>
            </div>
            <div class="auth-status" id="auth-status">Klar til at starte</div>
            <div class="auth-resend hidden" id="auth-resend">
              <button id="auth-resend-btn" class="btn ghost small" type="button">
                Send bekræftelsesmail igen
              </button>
              <div class="auth-resend-note">Tjek spam hvis mailen ikke dukker op.</div>
            </div>
            <div class="auth-form">
              <div class="field">
                <label for="auth-email-input">Email</label>
                <input
                  id="auth-email-input"
                  type="email"
                  placeholder="din@email.dk"
                  autocomplete="email"
                />
              </div>
              <div class="field">
                <label for="auth-password-input">Adgangskode</label>
                <input
                  id="auth-password-input"
                  type="password"
                  placeholder="Adgangskode (min. 6 tegn)"
                  autocomplete="current-password"
                  minlength="6"
                />
              </div>
              <div class="auth-actions">
                <button id="auth-login-btn" class="btn primary" type="button">Log ind</button>
                <button id="auth-signup-btn" class="btn secondary" type="button">Opret konto</button>
              </div>
            </div>
            <details class="auth-alt">
              <summary>Brug login-link</summary>
              <div class="auth-email">
                <button id="auth-email-btn" class="btn ghost" type="button">Send login-link</button>
              </div>
            </details>
            <div class="auth-divider" id="auth-divider">eller</div>
            <div class="auth-oauth" id="auth-oauth">
              <button id="auth-google-btn" class="btn oauth google" type="button">
                Fortsæt med Google
              </button>
              <button id="auth-apple-btn" class="btn oauth apple" type="button">
                Fortsæt med Apple
              </button>
            </div>
          </section>
        </div>
      </section>

      <section id="consent-screen" class="screen hidden">
        <div class="consent-shell">
          <header class="consent-header">
            <div>
              <div class="eyebrow">Før du går i gang</div>
              <h1>Acceptér vilkår og politikker</h1>
              <p>
                For at bruge Human Biologi Studio skal du acceptere vilkår, handelsbetingelser og privatlivs-
                og persondatapolitik.
              </p>
            </div>
            <button id="consent-back-btn" class="btn ghost" type="button">Log ud</button>
          </header>
          <div class="consent-status hidden" id="consent-status"></div>
          <div class="consent-grid">
            <section class="panel consent-panel">
              <div class="panel-header">
                <h2>Samtykke</h2>
                <p>Du er logget ind som <span id="consent-email">—</span>.</p>
              </div>
              <label class="toggle">
                <input type="checkbox" id="consent-terms-gate" />
                <span>Jeg accepterer vilkår og handelsbetingelser</span>
                <small>Påkrævet for adgang</small>
              </label>
              <label class="toggle">
                <input type="checkbox" id="consent-privacy-gate" />
                <span>Jeg accepterer privatlivs- og persondatapolitik</span>
                <small>Påkrævet for adgang</small>
              </label>
              <div class="account-actions">
                <button id="consent-accept-btn" class="btn primary" type="button">
                  Accepter og fortsæt
                </button>
              </div>
              <div class="field-hint">Du kan altid se dokumenterne igen i din profil.</div>
            </section>
            <section class="panel consent-panel">
              <div class="panel-header">
                <h2>Læs dokumenterne</h2>
                <p>Få hele teksten, før du accepterer.</p>
              </div>
              <div class="legal-links">
                <a class="legal-link" href="vilkaar.html">Vilkår</a>
                <a class="legal-link" href="privatlivspolitik.html">Privatlivspolitik</a>
                <a class="legal-link" href="persondatapolitik.html">Persondatapolitik</a>
                <a class="legal-link" href="handelsbetingelser.html">Handelsbetingelser</a>
              </div>
            </section>
          </div>
        </div>
      </section>

      <section id="landing-screen" class="screen hidden">
        <div class="landing-shell dashboard-shell">
          <header class="dashboard-hero reveal" style="--delay: 0s">
            <div class="dashboard-copy">
              <div class="eyebrow">Velkommen tilbage</div>
              <h1>Din næste runde starter her</h1>
              <p>
                Byg en ny runde på få sekunder og følg, hvordan du ligger i forhold til 12-målet.
              </p>
              <div class="landing-actions">
                <button id="landing-start-btn" class="btn primary" type="button">Start runde</button>
              </div>
            </div>
            <div class="dashboard-highlight">
              <div class="highlight-card">
                <div class="highlight-top">
                  <div class="highlight-block">
                    <div class="highlight-label">Niveau</div>
                    <div class="highlight-value" id="hero-rank">—</div>
                    <div class="highlight-meta" id="hero-rank-meta">Ingen rekord endnu</div>
                  </div>
                  <div class="highlight-block">
                    <div class="highlight-label">Mål</div>
                    <div class="highlight-goal" id="hero-target">12</div>
                    <div class="highlight-meta" id="hero-target-meta">92% for topkarakter</div>
                  </div>
                </div>
                <div class="highlight-progress">
                  <div class="highlight-progress-bar">
                    <div class="highlight-progress-fill" id="hero-progress-fill"></div>
                  </div>
                </div>
                <div class="highlight-streak">
                  <div class="highlight-label">Streak</div>
                  <div class="highlight-streak-value" id="hero-streak">0</div>
                  <div class="highlight-meta" id="hero-streak-meta">Ingen streak endnu</div>
                </div>
              </div>
            </div>
          </header>

          <section class="panel history-panel dashboard-history reveal" style="--delay: 0.05s">
            <div class="panel-header">
              <h2>Seneste aktivitet</h2>
              <p>Hold øje med progressionen på tværs af runder.</p>
            </div>
            <div class="history-list" id="landing-history-list"></div>
          </section>
        </div>
      </section>

      <section id="menu-screen" class="screen hidden">
        <div class="menu-shell">
          <header class="menu-header reveal" style="--delay: 0s">
            <div class="brand-block">
              <div class="brand-mark">
                <img class="brand-logo" src="Logo.png" alt="Human Biologi Studio logo" />
              </div>
              <div>
                <div class="brand-subtitle">Sundhed &amp; Informatik</div>
                <h1>Human Biologi Studio</h1>
                <p>
                  Byg en runde, der passer til din repetition. Vælg årgang og emner, justér blanding og sæt tempoet
                  selv.
                </p>
              </div>
            </div>
            <div class="menu-right">
              <div class="menu-stats">
                <div class="stat-pill" id="question-count-chip">Indlæser …</div>
                <div class="stat-pill" id="pool-count-chip">0 i puljen</div>
                <div class="stat-pill" id="ai-status-pill">Assistent: Tjekker …</div>
              </div>
              <div class="menu-account">
                <div class="user-chip" id="user-chip">Ikke logget ind</div>
                <button id="account-btn" class="btn ghost" type="button">Konto</button>
              </div>
            </div>
          </header>

          <div class="menu-grid">
            <div class="menu-column">
              <section class="panel builder reveal" style="--delay: 0.05s">
                <div class="panel-header">
                  <h2>Byg din runde</h2>
                  <p>Vælg en retning og tilpas længde, blanding og tempo ét sted.</p>
                </div>

                <div class="builder-stack">
                  <div class="builder-section">
                    <div class="section-title">
                      <h3>Hvad vil du træne?</h3>
                      <p>Start med en skabelon og justér bagefter.</p>
                    </div>
                    <div class="preset-grid" id="preset-grid">
                      <button class="preset-card" type="button" data-preset="exam" aria-pressed="false">
                        <div class="preset-title">Eksamen</div>
                        <div class="preset-text">Balanceret blanding med realistisk tempo.</div>
                        <div class="preset-meta">24 spg · Standard</div>
                      </button>
                      <button class="preset-card" type="button" data-preset="review" aria-pressed="false">
                        <div class="preset-title">Repetition</div>
                        <div class="preset-text">Bred dækning med færre gentagelser.</div>
                        <div class="preset-meta">30 spg · Bredt</div>
                      </button>
                      <button class="preset-card" type="button" data-preset="weak" aria-pressed="false">
                        <div class="preset-title">Svage områder</div>
                        <div class="preset-text">Fokus på fejl og smart prioritet.</div>
                        <div class="preset-meta">20 spg · Fokus</div>
                      </button>
                      <button class="preset-card" type="button" data-preset="tempo" aria-pressed="false">
                        <div class="preset-title">Tempo</div>
                        <div class="preset-text">Hurtig rytme med auto-videre.</div>
                        <div class="preset-meta">18 spg · Tid</div>
                      </button>
                    </div>
                  </div>

                  <div class="builder-section">
                    <div class="section-title">
                      <h3>Din runde</h3>
                      <p>Juster længde og fordeling mellem opgavetyper.</p>
                    </div>
                    <div class="control-row">
                      <label class="control-label" for="question-count">
                        <span id="question-count-label">Antal spørgsmål</span>
                        <span
                          class="info"
                          id="question-count-info"
                          data-tooltip="Vælg hvor mange spørgsmål runden skal have. Hvis puljen er mindre, forkortes runden automatisk."
                          tabindex="0"
                          aria-label="Info om antal spørgsmål"
                          >i</span
                        >
                      </label>
                      <div class="range-control">
                        <input type="range" id="question-count" min="5" max="40" step="1" value="24" />
                      </div>
                      <div class="control-hint" id="question-count-hint">
                        Antal flervalg styrer længden; kortsvar følger forholdet. I uendelig træning er tallet
                        størrelsen pr. batch.
                      </div>
                    </div>
                    <details class="more-drawer">
                      <summary>
                        <span>Avanceret</span>
                        <small>Opgavetyper, blanding og tempo</small>
                      </summary>
                      <div class="more-body">
                        <div class="toggle-grid compact" id="type-toggle-grid">
                          <label class="toggle">
                            <input type="checkbox" id="toggle-include-mcq" checked />
                            <span>
                              Inkluder flervalg
                              <span
                                class="info"
                                data-tooltip="Tager flervalgsspørgsmål med i runden."
                                tabindex="0"
                                aria-label="Info om flervalg"
                                >i</span
                              >
                            </span>
                            <small>Flervalg</small>
                          </label>
                          <label class="toggle">
                            <input type="checkbox" id="toggle-include-short" checked />
                            <span>
                              Inkluder kortsvar
                              <span
                                class="info"
                                data-tooltip="Tager kortsvarsopgaver med i runden."
                                tabindex="0"
                                aria-label="Info om kortsvar"
                                >i</span
                              >
                            </span>
                            <small>Åbne spørgsmål</small>
                          </label>
                        </div>
                        <div class="control-row" id="ratio-control-row">
                          <label class="control-label" for="ratio-mcq">
                            Forhold mellem flervalg og kortsvar
                            <span
                              class="info"
                              data-tooltip="Sæt forholdet mellem flervalg og kortsvar. 4:1 giver ca. 24 flervalg og 6 kortsvar."
                              tabindex="0"
                              aria-label="Info om ratio"
                              >i</span
                            >
                          </label>
                          <div class="ratio-control">
                            <input type="number" id="ratio-mcq" min="1" max="12" step="1" value="4" />
                            <span class="ratio-divider">:</span>
                            <input type="number" id="ratio-short" min="1" max="12" step="1" value="1" />
                          </div>
                          <div class="control-hint">Antal flervalg styrer længden; kortsvar følger forholdet.</div>
                        </div>

                        <details class="settings-drawer">
                          <summary>
                            <span>Indhold &amp; visning</span>
                            <small>Detaljer og svarlayout</small>
                          </summary>
                          <div class="settings-body">
                            <div class="toggle-grid compact">
                              <label class="toggle">
                                <input type="checkbox" id="toggle-shuffle-options" checked />
                                <span>
                                  Bland svarmuligheder
                                  <span
                                    class="info"
                                    data-tooltip="Blander svarmulighederne, så rækkefølgen varierer."
                                    tabindex="0"
                                    aria-label="Info om bland svarmuligheder"
                                    >i</span
                                  >
                                </span>
                                <small>Blander indhold</small>
                              </label>
                            </div>
                          </div>
                        </details>

                        <details class="settings-drawer">
                          <summary>
                            <span>Blanding &amp; gentagelser</span>
                            <small>Smart læring og fejl</small>
                          </summary>
                          <div class="settings-body">
                            <div class="toggle-grid compact">
                              <label class="toggle">
                                <input type="checkbox" id="toggle-shuffle-questions" checked />
                                <span>
                                  Bland spørgsmål
                                  <span
                                    class="info"
                                    data-tooltip="Blander rækkefølgen af spørgsmålene i runden."
                                    tabindex="0"
                                    aria-label="Info om bland spørgsmål"
                                    >i</span
                                  >
                                </span>
                                <small>Ny blanding hver gang</small>
                              </label>
                              <label class="toggle">
                                <input type="checkbox" id="toggle-balanced" checked />
                                <span>
                                  Balancer emner
                                  <span
                                    class="info"
                                    data-tooltip="Fordeler spørgsmålene mere jævnt på tværs af emner i puljen."
                                    tabindex="0"
                                    aria-label="Info om balancer emner"
                                    >i</span
                                  >
                                </span>
                                <small>Fordeler bredt</small>
                              </label>
                              <label class="toggle">
                                <input type="checkbox" id="toggle-adaptive-mix" />
                                <span>
                                  Smart blanding
                                  <span
                                    class="info"
                                    data-tooltip="Vægter spørgsmål baseret på fejl, tempo og seneste svar."
                                    tabindex="0"
                                    aria-label="Info om smart blanding"
                                    >i</span
                                  >
                                </span>
                                <small>Prioritér svage områder</small>
                              </label>
                              <label class="toggle">
                                <input type="checkbox" id="toggle-avoid-repeats" />
                                <span>
                                  Undgå gentagelser
                                  <span
                                    class="info"
                                    data-tooltip="Skjuler spørgsmål du allerede har set i tidligere runder."
                                    tabindex="0"
                                    aria-label="Info om undgå gentagelser"
                                    >i</span
                                  >
                                </span>
                                <small>Skjuler tidligere spørgsmål</small>
                              </label>
                              <label class="toggle">
                                <input type="checkbox" id="toggle-prefer-unseen" checked />
                                <span>
                                  Prioritér nye spørgsmål
                                  <span
                                    class="info"
                                    data-tooltip="Skubber runden mod spørgsmål du ikke har set før, uden at fjerne dem helt."
                                    tabindex="0"
                                    aria-label="Info om nye spørgsmål"
                                    >i</span
                                  >
                                </span>
                                <small>Færre gentagelser</small>
                              </label>
                              <label class="toggle">
                                <input type="checkbox" id="toggle-focus-mistakes" />
                                <span>
                                  Fokus på fejl
                                  <span
                                    class="info"
                                    data-tooltip="Bygger runden ud fra dine seneste fejl, hvis der er nogen."
                                    tabindex="0"
                                    aria-label="Info om fokus på fejl"
                                    >i</span
                                  >
                                </span>
                                <small>Gentag sidste fejl</small>
                              </label>
                            </div>
                          </div>
                        </details>

                        <details class="settings-drawer">
                          <summary>
                            <span>Flow &amp; hjælp</span>
                            <small>Tempo og hjælp</small>
                          </summary>
                          <div class="settings-body">
                            <div class="toggle-grid compact">
                              <label class="toggle">
                                <input type="checkbox" id="toggle-auto-figure" />
                                <span>
                                  Auto-figurbeskrivelser
                                  <span
                                    class="info"
                                    data-tooltip="Genererer figurbeskrivelser automatisk i baggrunden, så facit matcher billederne."
                                    tabindex="0"
                                    aria-label="Info om figurbeskrivelser"
                                    >i</span
                                  >
                                </span>
                                <small>Batch i baggrunden</small>
                              </label>
                              <label class="toggle">
                                <input type="checkbox" id="toggle-auto-advance" />
                                <span>
                                  Auto-videre
                                  <span
                                    class="info"
                                    data-tooltip="Går automatisk videre efter svar eller spring."
                                    tabindex="0"
                                    aria-label="Info om auto-videre"
                                    >i</span
                                  >
                                </span>
                                <small>Går videre automatisk</small>
                              </label>
                              <label class="toggle">
                                <input type="checkbox" id="toggle-infinite-mode" />
                                <span>
                                  Uendelig træning
                                  <span
                                    class="info"
                                    data-tooltip="Fortsæt med nye spørgsmål, indtil du selv afslutter runden."
                                    tabindex="0"
                                    aria-label="Info om uendelig træning"
                                    >i</span
                                  >
                                </span>
                                <small>Slut når du vil</small>
                              </label>
                            </div>

                            <div class="control-row compact" id="auto-advance-row">
                              <label class="control-label" for="auto-advance-delay">
                                Auto-videre tempo
                                <span
                                  class="info"
                                  data-tooltip="Sætter hvor hurtigt auto-videre hopper til næste spørgsmål."
                                  tabindex="0"
                                  aria-label="Info om auto-videre tempo"
                                  >i</span
                                >
                              </label>
                              <div class="range-control">
                                <input
                                  type="range"
                                  id="auto-advance-delay"
                                  min="600"
                                  max="2400"
                                  step="100"
                                  value="1200"
                                />
                                <div class="range-pill" id="auto-advance-label">1.2s</div>
                              </div>
                              <div class="control-hint">Aktiver auto-videre for at bruge tempoet.</div>
                            </div>
                          </div>
                        </details>
                      </div>
                    </details>
                  </div>
                </div>
              </section>

              <section class="panel summary reveal" style="--delay: 0.15s">
                <div class="panel-header">
                  <h2>Din runde</h2>
                  <p>Opsummering af din nuværende opsætning.</p>
                </div>
                <div class="summary-card">
                  <div class="summary-item">Pulje: <strong id="pool-count">0</strong> spørgsmål</div>
                  <div class="summary-item">Runde: <strong id="round-count">0</strong> spørgsmål</div>
                  <div class="summary-item">Blanding: <span id="mix-summary">—</span></div>
                  <div class="summary-item">År: <span id="year-summary">—</span></div>
                  <div class="summary-item">Emner: <span id="category-summary">—</span></div>
                  <div class="summary-item">Genbrug: <span id="repeat-summary">—</span></div>
                </div>

                <div class="cta-stack">
                  <button id="start-btn" class="btn primary" type="button">Start spil</button>
                </div>
                <details class="more-drawer">
                  <summary>
                    <span>Mere</span>
                    <small>Hjælp og genveje</small>
                  </summary>
                  <div class="more-body">
                    <button id="rules-btn" class="btn ghost" type="button">Spilguide</button>
                  </div>
                </details>
                <div class="hint" id="selection-hint">Vælg mindst ét emne og ét sæt for at starte.</div>
              </section>
            </div>

            <div class="menu-column">
              <section class="panel filters reveal" style="--delay: 0.1s">
                <div class="panel-header">
                  <h2>Filtrer spørgsmål</h2>
                  <p>Vælg årgang og emner, så runden rammer det du læser op på.</p>
                </div>

                <details class="more-drawer">
                  <summary>
                    <span>Mere</span>
                    <small>Hurtigvalg til filtre</small>
                  </summary>
                  <div class="more-body">
                    <div class="more-actions">
                      <button class="btn ghost small" id="select-all-years" type="button">Alle årgange</button>
                      <button class="btn ghost small" id="clear-years" type="button">Ingen årgange</button>
                      <button class="btn ghost small" id="select-all-categories" type="button">Alle emner</button>
                      <button class="btn ghost small" id="clear-categories" type="button">Ingen emner</button>
                    </div>
                  </div>
                </details>

                <div class="filter-group">
                  <div class="filter-header">
                    <h3>
                      Årgang / sæt
                      <span
                        class="info"
                        data-tooltip="Vælg hvilke eksamensår og sæt der skal indgå i puljen."
                        tabindex="0"
                        aria-label="Info om årgangsfilter"
                        >i</span
                      >
                    </h3>
                  </div>
                  <div class="chip-group" id="year-chips"></div>
                </div>

                <div class="filter-group">
                  <div class="filter-header">
                    <h3>
                      Emner
                      <span
                        class="info"
                        data-tooltip="Vælg præcis hvilke emner der skal trækkes spørgsmål fra."
                        tabindex="0"
                        aria-label="Info om emnefilter"
                        >i</span
                      >
                    </h3>
                    <input type="search" id="category-search" placeholder="Søg emne" />
                  </div>
                  <div class="chip-group" id="category-chips"></div>
                </div>
              </section>

              <section class="panel history-panel reveal" style="--delay: 0.2s">
                <div class="panel-header">
                  <h2>Din udvikling</h2>
                  <p>Se dine seneste runder og om du går frem mod 12.</p>
                </div>
                <div class="history-grid">
                  <div class="history-card">
                    <div class="history-label">Seneste</div>
                    <div class="history-value" id="history-latest">—</div>
                    <div class="history-meta" id="history-latest-meta">Ingen runder endnu</div>
                  </div>
                  <div class="history-card">
                    <div class="history-label">Trend</div>
                    <div class="history-value" id="history-trend">—</div>
                    <div class="history-meta" id="history-trend-meta">Afventer 2 runder</div>
                  </div>
                  <div class="history-card highlight">
                    <div class="history-label">Bedste</div>
                    <div class="history-value" id="history-best">—</div>
                    <div class="history-meta" id="history-best-meta">Mål: 12 (92%)</div>
                  </div>
                </div>
                <div class="history-list" id="history-list"></div>
              </section>
            </div>
          </div>
        </div>
      </section>

      <section id="quiz-screen" class="screen hidden">
        <div class="game-shell">
          <header class="game-header reveal" style="--delay: 0s">
            <div class="game-left">
              <img class="brand-logo small" src="Logo.png" alt="Human Biologi Studio logo" />
              <div class="session-pill" id="session-pill">Runde</div>
            </div>
            <div class="scoreboard">
              <div class="score">Flervalg <span id="mcq-score-value">0</span></div>
              <div class="score">Kortsvar <span id="short-score-value">0</span></div>
              <div class="score">Total <span id="score-value">0%</span></div>
              <div class="best">Bedste <span id="best-score-value">0%</span></div>
            </div>
          </header>

          <div class="game-grid">
            <aside class="game-aside reveal" style="--delay: 0.05s">
              <div class="panel compact">
                <div class="progress-label">
                  <span id="progress-text">0 / 0</span>
                  <span class="tempo" id="tempo-text">Tempo: —</span>
                </div>
                <div class="progress-bar">
                  <div class="progress-fill" id="progress-fill"></div>
                </div>
              </div>

              <details class="panel compact more-panel" id="more-panel">
                <summary>
                  <span>Mere</span>
                  <small>Værktøjer</small>
                </summary>
                <div class="more-body">
                  <div class="more-actions">
                    <button class="btn ghost small" id="skip-btn" type="button">Spring over (0 point)</button>
                    <button class="btn ghost small" id="back-to-menu" type="button">Til menu</button>
                    <button class="btn ghost small" id="toggle-focus" type="button">Fokus</button>
                    <button class="btn ghost small" id="toggle-meta" type="button">Skjul detaljer</button>
                    <button class="btn ghost small hidden" id="end-round-btn" type="button">Afslut runde</button>
                  </div>
                  <div class="toggle-grid compact">
                    <label class="toggle">
                      <input type="checkbox" id="toggle-tts" checked />
                      <span>
                        Læs højt
                        <span
                          class="info"
                          data-tooltip="Aktivér oplæsning og justér stemmen her."
                          tabindex="0"
                          aria-label="Info om oplæsning"
                          >i</span
                        >
                      </span>
                      <small>Oplæsning af spørgsmål</small>
                    </label>
                  </div>
                  <div class="tts-toolbar hidden" id="tts-toolbar" aria-label="Oplæsning" data-collapsed="false">
                    <div class="tts-header">
                      <div class="tts-title">
                        <span class="tts-title-text">Oplæsning</span>
                        <span class="tts-status" id="tts-status" role="status" aria-live="polite">
                          Oplæsning tjekkes …
                        </span>
                      </div>
                      <div class="tts-header-actions">
                        <div class="tts-controls">
                          <button class="btn ghost small" id="tts-preview-btn" type="button">
                            Test stemme
                          </button>
                        </div>
                        <button
                          class="btn ghost small"
                          id="tts-collapse-btn"
                          type="button"
                          aria-expanded="true"
                        >
                          Skjul
                        </button>
                      </div>
                    </div>
                    <div class="tts-body" id="tts-body">
                      <div class="tts-settings">
                        <label class="tts-toggle">
                          <input type="checkbox" id="tts-auto-toggle" />
                          <span>Auto-oplæsning</span>
                        </label>
                        <label class="tts-toggle">
                          <input type="checkbox" id="tts-options-toggle" checked />
                          <span>Læs svarmuligheder</span>
                        </label>
                        <label class="tts-field" for="tts-voice">
                          <span class="tts-label">Stemme</span>
                          <select id="tts-voice">
                            <option value="alloy">Alloy · Klar</option>
                            <option value="nova">Nova · Varm</option>
                            <option value="echo">Echo · Tydelig</option>
                            <option value="fable">Fable · Rolig</option>
                            <option value="onyx">Onyx · Dyb</option>
                            <option value="shimmer">Shimmer · Lys</option>
                          </select>
                        </label>
                        <label class="tts-field" for="tts-speed">
                          <span class="tts-label">Hastighed</span>
                          <div class="tts-speed">
                            <input type="range" id="tts-speed" min="0.7" max="1.3" step="0.05" value="1" />
                            <span id="tts-speed-label">1.0x</span>
                          </div>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </details>
            </aside>

            <main class="question-wrap reveal" style="--delay: 0.1s">
              <div class="question-card">
                <div class="question-meta" id="question-meta">
                  <span class="chip soft" id="question-type"></span>
                  <span class="chip soft" id="question-category"></span>
                  <span class="chip" id="question-year"></span>
                  <span class="chip soft" id="question-number"></span>
                </div>
                <p class="question-intro hidden" id="question-intro"></p>
                <div class="question-context hidden" id="question-context">
                  <div class="question-context-title" id="question-context-title"></div>
                  <ul class="question-context-list" id="question-context-list"></ul>
                </div>
                <h2 id="question-text">Spørgsmålet indlæses …</h2>
                <p class="question-subtitle hidden" id="question-subtitle"></p>
                <figure class="question-figure hidden" id="question-figure">
                  <div class="figure-media" id="question-figure-media"></div>
                  <figcaption id="question-figure-caption"></figcaption>
                </figure>
                <div id="options-container" class="options-grid"></div>
                <div id="short-answer-container" class="short-answer hidden">
                  <label class="field-label" for="short-answer-text">Dit svar</label>
                  <div class="short-answer-input" id="short-answer-input-wrap">
                    <textarea
                      id="short-answer-text"
                      rows="6"
                      placeholder="Skriv dit svar her. Brug gerne punktform og nævn nøglebegreber."
                    ></textarea>
                    <div
                      class="transcribe-indicator hidden"
                      id="transcribe-indicator"
                      data-state="transcribing"
                      aria-live="polite"
                    >
                      <span class="transcribe-spinner" aria-hidden="true"></span>
                      <span id="transcribe-text">Transkriberer …</span>
                    </div>
                  </div>
                  <div class="short-sketch-hint hidden" id="short-sketch-hint"></div>
                  <div class="sketch-panel hidden" id="sketch-panel">
                    <div class="sketch-panel-head">
                      <span id="sketch-panel-title">Skitse-analyse (auto)</span>
                    </div>
                    <div class="sketch-panel-body" id="sketch-panel-body">
                      <label class="sketch-upload" id="sketch-dropzone" for="sketch-upload">
                        <input type="file" id="sketch-upload" accept="image/*" />
                        <span class="sketch-upload-text">Vælg billede af din skitse</span>
                        <span class="sketch-drop-hint">Træk &amp; slip her</span>
                      </label>
                      <img class="sketch-preview hidden" id="sketch-preview" alt="Forhåndsvisning af skitse" />
                      <div class="sketch-actions">
                        <span class="sketch-status" id="sketch-status"></span>
                        <button class="btn ghost small hidden" id="sketch-retry-btn" type="button">
                          Prøv igen
                        </button>
                      </div>
                      <div class="sketch-feedback" id="sketch-feedback"></div>
                    </div>
                  </div>
                  <div class="review-drawer" id="short-review-drawer" data-open="false">
                    <div class="short-toolbar">
                      <div class="score-control">
                        <div class="score-label">
                          Point <span class="score-max">/ <span id="short-max-points">0</span></span>
                        </div>
                        <div class="score-inputs">
                          <input type="range" id="short-score-range" min="0" max="10" step="0.5" value="0" />
                        </div>
                        <div class="score-hint" id="short-score-hint"></div>
                      </div>
                      <div class="short-buttons">
                        <button class="btn ghost small" id="short-show-answer-btn" type="button">
                          Vis facit
                        </button>
                      </div>
                    </div>
                    <div class="ai-status" id="ai-status-inline"></div>
                    <div class="short-ai-feedback" id="short-ai-feedback"></div>
                    <div class="short-ai-actions">
                      <button class="btn ghost small hidden" id="short-ai-retry-btn" type="button">
                        Prøv igen
                      </button>
                    </div>
                    <div class="short-model hidden" id="short-model-answer">
                      <div class="short-model-head">
                        <h4 id="short-model-title">Modelbesvarelse</h4>
                        <span class="short-model-tag hidden" id="short-model-tag">Figurbeskrivelse</span>
                      </div>
                      <p id="short-model-text"></p>
                      <div class="short-figure hidden" id="short-figure-answer">
                        <div class="short-figure-head">
                          <h5>Figurbeskrivelse</h5>
                          <button class="btn ghost small" id="short-figure-generate-btn" type="button">Generér</button>
                        </div>
                        <div class="short-figure-status" id="short-figure-status"></div>
                        <p id="short-figure-text"></p>
                      </div>
                      <div class="short-sources" id="short-sources"></div>
                    </div>
                  </div>
                </div>
                <div class="question-hint hidden" id="question-hint">
                  <div class="question-hint-head">
                    <span>Hint</span>
                    <span class="question-hint-status" id="question-hint-status"></span>
                  </div>
                  <div class="question-hint-text hidden" id="question-hint-text"></div>
                </div>
                <div class="actions">
                  <button
                    class="btn ghost mic-btn hidden"
                    id="mic-btn"
                    type="button"
                    aria-label="Optag svar (M)"
                    title="Optag svar (M)"
                  >
                    <span class="mic-icon" aria-hidden="true">&#x1F3A4;</span>
                  </button>
                  <button class="btn secondary" id="next-btn" type="button" disabled>Næste</button>
                </div>
                <div class="feedback" id="feedback-area"></div>
              </div>
            </main>
          </div>
        </div>
      </section>

      <section id="result-screen" class="screen hidden">
        <div class="result-shell reveal" style="--delay: 0s">
          <div class="result-header">
            <div>
              <div class="eyebrow">Resultat</div>
              <h2>Din score <span id="final-score">0%</span></h2>
              <div class="result-metrics">
                <div class="grade-pill">Karakter <span id="final-grade">-</span></div>
                <div class="grade-pill">Samlet <span id="final-percent">0%</span></div>
              </div>
              <p id="final-message"></p>
            </div>
            <div class="result-badge">
              <img class="brand-logo small" src="Logo.png" alt="Human Biologi Studio logo" />
              <div class="pill highlight" id="best-badge">Ny personlig rekord!</div>
            </div>
          </div>

          <div class="result-breakdown">
            <div class="result-card">
              <div class="label">Flervalg point</div>
              <div class="value" id="result-mcq-points">0</div>
              <div class="meta" id="result-mcq-percent">0%</div>
            </div>
            <div class="result-card">
              <div class="label">Kortsvar point</div>
              <div class="value" id="result-short-points">0</div>
              <div class="meta" id="result-short-percent">0%</div>
            </div>
            <div class="result-card highlight">
              <div class="label">Karakter</div>
              <div class="value" id="result-grade">-</div>
              <div class="meta">7-trinsskala</div>
            </div>
          </div>

          <div class="stat-grid">
            <div class="stat">
              <div class="label">Korrekte</div>
              <div class="value" id="stat-correct">0</div>
            </div>
            <div class="stat">
              <div class="label">Forkerte</div>
              <div class="value" id="stat-wrong">0</div>
            </div>
            <div class="stat">
              <div class="label">Sprunget over</div>
              <div class="value" id="stat-skipped">0</div>
            </div>
            <div class="stat">
              <div class="label">Kortsvar point</div>
              <div class="value" id="stat-short-score">0 / 72</div>
            </div>
            <div class="stat">
              <div class="label">Tempo</div>
              <div class="value" id="stat-pace">—</div>
            </div>
          </div>

          <div class="actions result-actions">
            <button class="btn primary" id="play-again-btn" type="button">Spil igen</button>
          </div>
          <details class="more-drawer">
            <summary>
              <span>Mere</span>
              <small>Runde og navigation</small>
            </summary>
            <div class="more-body">
              <button class="btn ghost" id="restart-round-btn" type="button">Start igen</button>
              <button class="btn ghost" id="return-menu-btn" type="button">Til menu</button>
            </div>
          </details>

          <div class="review-queue hidden" id="review-queue">
            <div class="review-queue-header">
              <div>
                <h3>Smart gennemgang</h3>
                <p>Gennemgå kortsvar du missede med korte hints.</p>
              </div>
              <div class="review-queue-status" id="review-queue-status"></div>
            </div>
            <div id="review-queue-list" class="review-queue-list"></div>
          </div>

          <div class="review">
            <div class="review-header">
              <h3>Din runde</h3>
            </div>
            <details class="more-drawer review-filter-drawer">
              <summary>
                <span>Filtre</span>
                <small>Vis rigtige, forkerte og sprunget over</small>
              </summary>
              <div class="more-body">
                <div class="review-filters" role="group" aria-label="Filtrer din runde">
                  <button class="review-filter" id="review-filter-correct" type="button" aria-pressed="false">
                    Rigtige
                  </button>
                  <button class="review-filter" id="review-filter-wrong" type="button" aria-pressed="true">
                    Forkerte
                  </button>
                  <button class="review-filter" id="review-filter-skipped" type="button" aria-pressed="true">
                    Sprunget over
                  </button>
                </div>
              </div>
            </details>
            <div id="review-list" class="review-list"></div>
          </div>
        </div>
      </section>
      <section id="account-screen" class="screen hidden">
        <div class="account-shell">
          <header class="account-hero reveal" style="--delay: 0s">
            <div class="account-hero-head">
              <div>
                <div class="eyebrow">Konto</div>
                <h1>Din konto</h1>
                <p>Plan, profil og data samlet ét sted.</p>
              </div>
              <button id="account-back-btn" class="btn ghost" type="button">Tilbage til app</button>
            </div>
            <div class="account-hero-card">
              <div class="plan-row">
                <div class="plan-chip" id="plan-status">Plan: —</div>
                <div class="plan-meta" id="subscription-status">Ingen aktiv betaling endnu.</div>
              </div>
              <div class="account-actions">
                <button id="upgrade-btn" class="btn primary" type="button">Aktivér Pro</button>
                <button id="portal-btn" class="btn ghost" type="button">Administrer abonnement</button>
              </div>
              <div class="field-hint">Du kan altid ændre eller opsige dit abonnement.</div>
            </div>
          </header>
          <div class="account-status" id="account-status"></div>

          <div class="account-grid">
            <section class="panel account-panel reveal" style="--delay: 0.05s">
              <div class="panel-header">
                <h2>Profil</h2>
                <p>Hold dit navn opdateret og bekræft e-mailen fra login.</p>
              </div>
              <div class="field">
                <label for="profile-name-input">Navn</label>
                <input id="profile-name-input" type="text" placeholder="Dit navn" />
              </div>
              <div class="field">
                <label>Email</label>
                <div class="field-static" id="profile-email">—</div>
              </div>
              <div class="account-actions">
                <button id="profile-save-btn" class="btn primary" type="button">Gem profil</button>
              </div>
            </section>

            <section class="panel account-panel reveal" style="--delay: 0.15s">
              <div class="panel-header">
                <h2>Din nøgle</h2>
                <p>Brug din egen nøgle for gratis adgang til hjælpen.</p>
              </div>
              <label class="toggle">
                <input type="checkbox" id="own-key-toggle" />
                <span>Brug min egen nøgle</span>
                <small>Gemmes ikke mellem sessioner</small>
              </label>
              <div class="field">
                <label for="own-key-input">Din nøgle</label>
                <input id="own-key-input" type="password" placeholder="sk-..." autocomplete="off" />
                <div class="field-hint">Nøglen bruges kun når du beder om hjælp og gemmes ikke.</div>
              </div>
              <div class="account-actions">
                <button id="own-key-save-btn" class="btn primary" type="button">Gem nøgle</button>
                <button id="own-key-clear-btn" class="btn ghost" type="button">Ryd nøgle</button>
              </div>
            </section>

            <section class="panel account-panel reveal" style="--delay: 0.2s">
              <div class="panel-header">
                <h2>Jura &amp; samtykke</h2>
                <p>For at bruge appen skal du acceptere vilkår, handelsbetingelser og privatlivs- og persondatapolitik.</p>
              </div>
              <label class="toggle">
                <input type="checkbox" id="consent-terms" />
                <span>Jeg accepterer vilkår og handelsbetingelser</span>
                <small>Påkrævet</small>
              </label>
              <label class="toggle">
                <input type="checkbox" id="consent-privacy" />
                <span>Jeg accepterer privatlivs- og persondatapolitik</span>
                <small>Påkrævet</small>
              </label>
              <div class="account-actions">
                <button id="consent-save-btn" class="btn ghost" type="button">Gem samtykke</button>
              </div>
              <div class="legal-links">
                <a class="legal-link" href="vilkaar.html">Vilkår</a>
                <a class="legal-link" href="privatlivspolitik.html">Privatlivspolitik</a>
                <a class="legal-link" href="persondatapolitik.html">Persondatapolitik</a>
                <a class="legal-link" href="handelsbetingelser.html">Handelsbetingelser</a>
              </div>
              <div class="field-hint">Læs de fulde dokumenter før eller efter du giver samtykke.</div>
            </section>

            <section class="panel account-panel reveal" style="--delay: 0.25s">
              <div class="panel-header">
                <h2>Data &amp; sikkerhed</h2>
                <p>Hent eller slet dine data, når du vil.</p>
              </div>
              <div class="account-actions">
                <button id="export-data-btn" class="btn ghost" type="button">Download data</button>
                <button id="logout-btn" class="btn ghost" type="button">Log ud</button>
                <button id="delete-account-btn" class="btn danger" type="button">Slet konto</button>
              </div>
              <div class="field-hint">Sletning er permanent og kan ikke fortrydes.</div>
            </section>

            <section class="panel account-panel diagnostics-panel reveal" style="--delay: 0.3s">
              <div class="panel-header">
                <h2>Status &amp; overblik</h2>
                <p>Hurtigt overblik over login og betaling.</p>
              </div>
              <div class="diagnostics-grid">
                <div class="diagnostic-card">
                <div class="diagnostic-label">Server</div>
                  <div class="diagnostic-value" id="diag-backend">—</div>
                  <div class="diagnostic-meta" id="diag-backend-meta">—</div>
                </div>
                <div class="diagnostic-card">
                  <div class="diagnostic-label">Login</div>
                  <div class="diagnostic-value" id="diag-auth">—</div>
                  <div class="diagnostic-meta" id="diag-auth-meta">—</div>
                </div>
                <div class="diagnostic-card">
                  <div class="diagnostic-label">Betaling</div>
                  <div class="diagnostic-value" id="diag-stripe">—</div>
                  <div class="diagnostic-meta" id="diag-stripe-meta">—</div>
                </div>
                <div class="diagnostic-card">
                <div class="diagnostic-label">Hjælp</div>
                  <div class="diagnostic-value" id="diag-ai">—</div>
                  <div class="diagnostic-meta" id="diag-ai-meta">—</div>
                </div>
              </div>
              <div class="account-actions">
                <button id="diag-refresh-btn" class="btn ghost" type="button">Opdatér status</button>
              </div>
              <div class="field-hint">Nogle checks kræver login for at vise fuld status.</div>
            </section>
          </div>
        </div>
      </section>
      <section id="checkout-screen" class="screen hidden">
        <div class="checkout-shell">
          <header class="checkout-hero">
            <div class="checkout-hero-head">
              <div class="eyebrow">Pro</div>
              <h1>Gør din træning skarpere</h1>
              <p>Gennemfør betalingen sikkert med Stripe og få adgang med det samme.</p>
            </div>
            <button id="checkout-back-btn" class="btn ghost" type="button">Tilbage</button>
          </header>
          <div class="checkout-status hidden" id="checkout-status"></div>
          <div class="checkout-grid">
            <section class="panel checkout-panel">
              <div class="panel-header">
                <h2>Betaling</h2>
                <p>Sikker betaling håndteres af Stripe.</p>
              </div>
              <form id="checkout-form">
                <div class="checkout-express hidden" id="checkout-express">
                  <div class="checkout-express-title">Hurtig betaling</div>
                  <div id="checkout-wallets" class="checkout-wallets"></div>
                  <div class="checkout-divider"><span>eller betal med kort</span></div>
                </div>
                <div id="checkout-element" class="checkout-element"></div>
                <div class="checkout-actions">
                  <button id="checkout-submit-btn" class="btn primary" type="submit">Betal</button>
                  <button id="checkout-cancel-btn" class="btn ghost" type="button">Annuller</button>
                </div>
              </form>
              <div class="field-hint">Du kan altid opsige eller ændre abonnementet bagefter.</div>
            </section>
            <section class="panel checkout-summary">
              <div class="panel-header">
                <h2>Det får du med Pro</h2>
                <p>Designet til fokus og højere score.</p>
              </div>
              <div class="checkout-plan">
                <div class="checkout-plan-name" id="checkout-plan-name">Pro</div>
                <div class="checkout-plan-note hidden" id="checkout-plan-note"></div>
              </div>
              <div class="checkout-price">
                <div class="checkout-price-amount" id="checkout-price">—</div>
                <div class="checkout-price-interval" id="checkout-interval">Pr. måned</div>
              </div>
              <ul class="checkout-features">
                <li>AI-hjælp til MCQ og kortsvar, når du går i stå.</li>
                <li>Forklaringer på fejl, så du lærer af hver runde.</li>
                <li>Oplæsning med stemmevalg og tempo.</li>
                <li>Historik og performance, der følger din udvikling.</li>
                <li>Prioriteret adgang, når AI-ressourcer er travle.</li>
              </ul>
              <div class="checkout-total">
                <span>Beløb i dag</span>
                <strong id="checkout-total">—</strong>
              </div>
              <div class="checkout-trust">Betal med kort, Apple Pay eller Google Pay (hvis tilgængeligt).</div>
            </section>
          </div>
        </div>
      </section>

    </div>

    <div class="modal hidden" id="rules-modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Spilguide</h3>
          <button class="icon-btn" id="close-modal" type="button">Luk</button>
        </div>
        <div class="modal-grid">
          <div>
            <h4>Point &amp; flow</h4>
            <ul class="rules-list">
              <li>+3 point for korrekt, -1 for forkert, 0 for at springe over.</li>
              <li>Kortsvar bedømmes på 0–max point pr. delspørgsmål (med eller uden hjælp).</li>
              <li>Samlet score og 7-trin karakter beregnes 50/50 mellem flervalg og kortsvar.</li>
              <li>Kortsvar under 5 point tæller som fejlet.</li>
              <li>Figurer er skjult – brug “Vis figur” når du har brug for dem.</li>
              <li>Du kan skræddersy runden med emner, årgange og blanding.</li>
              <li>Uendelig træning fortsætter, indtil du afslutter runden.</li>
              <li>Spillet gemmer din bedste score og dine seneste fejl lokalt.</li>
            </ul>
          </div>
          <div>
            <h4>Shortcuts</h4>
            <ul class="rules-list">
              <li>
                <span class="shortcut-icon" aria-hidden="true">&#x1F524;</span>
                <kbd class="keycap">A–D</kbd> svar på spørgsmål
              </li>
              <li>
                <span class="shortcut-icon" aria-hidden="true">&#x23ED;&#xFE0F;</span>
                <kbd class="keycap">N</kbd> gå videre når svar er givet
              </li>
              <li>
                <span class="shortcut-icon" aria-hidden="true">&#x23E9;&#xFE0F;</span>
                <kbd class="keycap">K</kbd> spring over
              </li>
              <li>
                <span class="shortcut-icon" aria-hidden="true">&#x1F9EE;</span>
                <kbd class="keycap">V</kbd> vurdér (auto-bedøm)
              </li>
              <li>
                <span class="shortcut-icon" aria-hidden="true">&#x1F3A4;</span>
                <kbd class="keycap">M</kbd> optag svar
              </li>
              <li>
                <span class="shortcut-icon" aria-hidden="true">&#x1F5BC;&#xFE0F;</span>
                <kbd class="keycap">G</kbd> vis/skjul figur
              </li>
              <li>
                <span class="shortcut-icon" aria-hidden="true">&#x1F4A1;</span>
                <kbd class="keycap">H</kbd> hint
              </li>
              <li>
                <span class="shortcut-icon" aria-hidden="true">&#x1F50A;</span>
                <kbd class="keycap">L</kbd> oplæsning
              </li>
              <li>
                <span class="shortcut-icon" aria-hidden="true">&#x1F3AF;</span>
                <kbd class="keycap">F</kbd> fokus
              </li>
            </ul>
          </div>
        </div>
        <div class="modal-actions">
          <button class="btn ghost" id="modal-close-btn" type="button">Tilbage</button>
        </div>
      </div>
    </div>


    <div class="modal hidden figure-modal" id="figure-modal">
      <div class="modal-content figure-modal-content">
        <div class="modal-header">
          <h3 id="figure-modal-title">Figur</h3>
          <button class="icon-btn" id="figure-modal-close" type="button">Luk</button>
        </div>
        <div class="figure-modal-body">
          <img id="figure-modal-img" alt="" />
          <div class="figure-modal-caption" id="figure-modal-caption"></div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <script src="app.js"></script>
  </body>
</html>
